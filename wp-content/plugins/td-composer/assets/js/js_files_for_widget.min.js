var tdcAdminIFrameUI;
(function(f,a,d,b){tdcAdminIFrameUI={_liveIframeWindowObject:b,_$liveIframe:b,getIframeWindow:function(){d.isUndefined(tdcAdminIFrameUI._liveIframeWindowObject)&&new tdcNotice.notice("tdcAdminIFrameUI._liveIframeWindowObject is undefined. AKA: The iFrame window object is undefined. The iFrame was probably not added to the page!",!0,!1);return tdcAdminIFrameUI._liveIframeWindowObject},getLiveIframe:function(){return tdcAdminIFrameUI._$liveIframe},evalInIframe:function(c){tdcAdminIFrameUI.getIframeWindow().eval(c)},initContent:function(c){c.find(".td-main-content-wrap .tdc-row").length||
(c.find(".tdc-content-wrap").prepend('<div class="tdc-row"><div class="vc_row wpb_row td-pb-row"><div class="tdc-column"><div class="td-pb-span12 wpb_column vc_column_container"><div class="wpb_wrapper"></div></div></div></div></div>'),window.tdcPostSettings.postContent+="[vc_row][vc_column][/vc_column][/vc_row]")},init:function(){window.addWrappers=function(c){c=c.find(".td-main-content-wrap");c.find(".tdc-row").wrapAll('<div id="tdc-rows"></div>').each(function(c,b){f(b).find(".tdc-column").wrapAll('<div class="tdc-columns"></div>')});
c.find(".tdc-column").each(function(c,b){var a=f(b);a.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');a=a.find(".td_block_wrap");window.checkTdBlockWrap(a);a.wrap('<div class="tdc-element"></div>')});c.find(".tdc-inner-row").each(function(c,b){f(b).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(c,b){var a=f(b).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(a=f(b).find(".wpb_wrapper"),
a.length&&a.append('<div class="tdc-elements"></div>'))})});c.find(".tdc-element, .tdc-element-inner-row").each(function(c,b){var a=f(b);a.length&&a.not(".tdc-element-inner-column").addClass("tdc-element-column")});c.find(".tdc-column").each(function(c,b){var a=f(b).find(".tdc-element, .tdc-element-inner-row");a.length?a.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(a=f(b).find(".wpb_wrapper"),a.length&&a.append('<div class="tdc-elements"></div>'))});c.find(".tdc-elements:empty").each(function(c,
b){var a="",e=f(b);e.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":e.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(a);e.append(a)})};window.addRowWrappers=function(c){c.find(".tdc-column").wrapAll('<div class="tdc-columns"></div>');c.find(".tdc-column").each(function(c,b){var a=f(b);a.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');
a=a.find(".td_block_wrap");window.checkTdBlockWrap(a);a.wrap('<div class="tdc-element"></div>')});c.find(".tdc-inner-row").each(function(c,b){f(b).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(c,b){var a=f(b).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(a=f(b).find(".wpb_wrapper"),a.length&&a.append('<div class="tdc-elements"></div>'))})});c.find(".tdc-element, .tdc-element-inner-row").each(function(c,
b){var a=f(b);a.length&&a.not(".tdc-element-inner-column").addClass("tdc-element-column")});c.find(".tdc-column").each(function(c,b){var a=f(b).find(".tdc-element, .tdc-element-inner-row");a.length?a.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(a=f(b).find(".wpb_wrapper"),a.length&&a.append('<div class="tdc-elements"></div>'))});c.find(".tdc-elements:empty").each(function(c,b){var a="",e=f(b);e.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":e.closest(".tdc-column").length&&
(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(a);e.append(a)})};window.addColumnWrappers=function(c){c.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');var b=c.find(".td_block_wrap");window.checkTdBlockWrap(b);b.wrap('<div class="tdc-element"></div>');c.find(".tdc-inner-row").each(function(c,b){f(b).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(c,
b){var a=f(b).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(a=f(b).find(".wpb_wrapper"),a.length&&a.append('<div class="tdc-elements"></div>'))})});c.find(".tdc-element, .tdc-element-inner-row").each(function(c,b){var a=f(b);a.length&&a.not(".tdc-element-inner-column").addClass("tdc-element-column")});b=c.find(".tdc-element, .tdc-element-inner-row");b.length?b.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(b=c.find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'));c.find(".tdc-elements:empty").each(function(b,c){var a="",e=f(c);e.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":e.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(a);e.append(a)})};window.addInnerRowWrappers=function(c){var b=c.find(".td_block_wrap");
window.checkTdBlockWrap(b);b.wrap('<div class="tdc-element"></div>');c.find(".tdc-inner-row").each(function(c,b){f(b).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(c,b){var a=f(b).find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(a=f(b).find(".wpb_wrapper"),a.length&&a.append('<div class="tdc-elements"></div>'))})});c.find(".tdc-elements:empty").each(function(b,c){var a="",e=f(c);e.closest(".tdc-inner-column").length?
a=" tdc-element-inner-column":e.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(a);e.append(a)})};window.addInnerColumnWrappers=function(b){var c=b.find(".td_block_wrap");window.checkTdBlockWrap(c);c.wrap('<div class="tdc-element"></div>');c=b.find(".tdc-element");c.length?c.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(c=b.find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'));b.find(".tdc-elements:empty").each(function(c,b){var a="",e=f(b);e.closest(".tdc-inner-column").length?a=" tdc-element-inner-column":e.closest(".tdc-column").length&&(a=" tdc-element-column");a=f('<div class="'+tdcOperationUI._emptyElementClass+a+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(a);e.append(a)})};window.checkTdBlockWrap=function(c){c.each(function(c,b){var a=
f(b);0===parseInt(a.height())&&a.addClass("tdc-block-empty")})};var c=window.tdcPostSettings.postMetaVcJsStatus,b=window.tdcPostSettings.postContent;"1"!==window.tdcPostSettings.postMetaDirtyContent&&"true"!==c||""===b||new tdcNotice.notice("The current content page hasn't been created by TagDiv Composer!",!1,!1);tdcAdminIFrameUI.checkIframe(tdcAdminIFrameUI._$liveIframe)},loadIframe:function(){(tdDetect.isIe8||tdDetect.isIe9||tdDetect.isIe10)&&tdConfirm.showModalOk("Browser Information","TagDiv Composer does not work with Internet Explorer 8, 9, 10",
function(){tb_remove()});var c=f(this).contents();tdcAdminIFrameUI.initContent(c);tdcAdminIFrameUI._liveIframeWindowObject=f(this).get(0).contentWindow;var a=f('<div id="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');c.find("body").prepend(a);tdcAdminWrapperUI.$recycle=a;tdcIFrameData._postOriginalContentJSON=b;window.addWrappers(c);tdcIFrameData.init(c,!0);tdcOperationUI.init(c,!0);c.on("click","a",function(c){c.preventDefault();"undefined"!==this.href&&window.open(this.href,
"_blank")});c[0].addEventListener("mousedown",function(c){1!==c.which&&c.stopPropagation()},!0);c[0].addEventListener("mousemove",function(b){c.lastMouseEvent=b},!0)},checkIframe:function(c){if(d.isUndefined(c))c=window.tdcPostSettings.postUrl,c=0>c.indexOf("?")?c+("?td_action=tdc_edit&post_id="+window.tdcPostSettings.postId):c+("&td_action=tdc_edit&post_id="+window.tdcPostSettings.postId),c=f('<iframe id="tdc-live-iframe" name="tdc-live-iframe" src="'+c+'" scrolling="auto" style="width: 100%; height: 100%"></iframe>').load(tdcAdminIFrameUI.loadIframe),
f("#tdc-live-iframe-wrapper").append(c);else{var a=c,e=a.contents();tdcAdminIFrameUI.initContent(e);tdcAdminIFrameUI._liveIframeWindowObject=a.get(0).contentWindow;a=f('<div id="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');e.find("body").prepend(a);tdcAdminWrapperUI.$recycle=a;tdcIFrameData._postOriginalContentJSON=b;window.addWrappers(e);tdcIFrameData.init(e,!0);tdcOperationUI.init(e,!0);e.find("a").each(function(c,b){b.setAttribute("target","_blank")});c.removeClass("tdc-live-iframe");
c.removeClass("tdc-live-iframe-temp")}tdcAdminIFrameUI._$liveIframe=c}}})(jQuery,Backbone,_);var tdcCssEditor={};
(function(f,a,d){tdcCssEditor={_mappedParameter:d,_model:d,_currentViewportSettings:{name:"all",settings:d},_currentCssSettings:d,_INHERITED_CSS_CLASS:"tdc-css-inherited",_INACTIVE_CSS_CLASS:"tdc-css-inactive",_isInitialized:!1,init:function(){tdcCssEditor._isInitialized||(tdcCssEditor._bindEvents(),tdcCssEditor._isInitialized=!0)},tdcCssImageWrapHandler:function(b){var c=f(b.currentTarget),d=c.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(c);
f(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");f(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");f(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");window.send_to_editor=function(b){var e=f("img",b).attr("src"),h="";"undefined"===typeof e?(e=f(b).attr("src"),h=f(b).attr("class")):h=f("img",b).attr("class");f.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(c){c.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_class:h,action:"tdc_ajax_get_image_id"}}).done(function(b,h,k){if("success"===h)if(a.isObject(b)&&a.has(b,"errors"))new tdcNotice.notice(b.errors,!0,!1);else{h=c.closest(".tdc-property-wrap");k=h.find(".tdc-css-image-remove");var g=h.find(".tdc-inherit-image");k.removeClass("tdc-hidden-button");"all"===tdcCssEditor._currentViewportSettings.name?g.hide():g.show();c.attr("style","background-image: url( '"+e+"') ");c.data("image_link",
e);c.data("image_id",b.image_id);window.send_to_editor=window.original_send_to_editor;window.tb_remove();h.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"undefined"===typeof c.data("model_id")?tdcCssEditor.saveWidgetForm(c):(b=tdcCssEditor._generateCssAttValue(d),h=tdcIFrameData.getModel(c.data("model_id")),tdcSidebarController.onUpdate(h,c.data("param_name"),"",b))}}).fail(function(b,c,a){})};return!1},tdcCssImageRemoveHandler:function(b){var c=f(b.currentTarget),h=c.closest(".tdc-property-wrap");
b=h.find(".tdc-css-image-wrap");var e=h.find(".tdc-inherit-image");c.addClass("tdc-hidden-button");"all"!==tdcCssEditor._currentViewportSettings.name&&e.show();h.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);b.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");"all"===tdcCssEditor._currentViewportSettings.name?b.data("image_link",""):b.data("image_link","no_value");e=b.data("model_id");a.isUndefined(e)?tdcCssEditor.saveWidgetForm(c):(c=
h.closest(".tdc-tab-content"),c=tdcCssEditor._generateCssAttValue(c),e=tdcIFrameData.getModel(e),tdcSidebarController.onUpdate(e,b.data("param_name"),"",c))},_updateColorField:function(b){var c=b.closest(".tdc-property-wrap"),h=c.data("tdc-for"),e=c.find(".tdc-inherit-color"),d=c.find(".wp-color-result"),f=b.data("no_value"),n=b.data("default_value");a.isUndefined(f)||1!==f?("all"!==tdcCssEditor._currentViewportSettings.name&&e.show(),tdcCssEditor._updateData(b),e={isInherited:!1},h=tdcCssEditor._getSettingsProperty(h,
"",e),e.isInherited?(b.attr("placeholder",h),b.val(""),c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),d.attr("style","background-color: "+tdcCssEditor._getRgba(h))):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),tdcCssEditor._checkDefaultColor(b))):(b.val("no_value"),tdcCssEditor._updateData(b),b.val(""),a.isUndefined(n)||d.attr("style","background-color: "+tdcCssEditor._getRgba(n)),tdcCssEditor._checkDefaultColor(b))},_clearColorPicker:function(b){b=f(b.currentTarget).closest(".tdc-property-wrap");
var c=b.closest(".tdc-tab-content"),a=b.find("input.wp-color-picker"),e=b.find(".tdc-inherit-color");b.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"all"!==tdcCssEditor._currentViewportSettings.name&&(a.data("no_value",1),a.attr("placeholder",""),e.show());tdcCssEditor._checkDefaultColor(a);c.hasClass("tdc-tab-widget")&&(a.val(""),a.trigger("keyup"))},_showColorPicker:function(b){b=f(b.currentTarget).closest(".tdc-property-wrap").find("input.wp-color-picker");"no_value"===b.val()&&b.val("")},_changeColor:function(b){var c=
f(b.currentTarget).closest(".wp-picker-container").find("input.wp-color-picker");""!==c.val()&&c.data("no_value",0);"keyup"===b.type?setTimeout(function(){tdcCssEditor._updateColorField(c)},100):tdcCssEditor._updateColorField(c)},_inheritSelect:function(b){b=f(b.currentTarget);var c=b.closest(".tdc-property-wrap"),h=c.data("tdc-for");a.isUndefined(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][h])||delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][h];
var e={isInherited:!1},h=tdcCssEditor._getSettingsProperty(h,d,e),k=c.find("select:first");e.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),b.hide()):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),b.show());a.isUndefined(h)?(k.val(k.find("option:first").val()),b.hide()):k.val(h);tdcCssEditor._updateData(k)},_inheritColor:function(b){b=f(b.currentTarget);var c=b.closest(".tdc-property-wrap"),h=c.find(".wp-color-picker"),e=c.find(".wp-color-result"),k=c.data("tdc-for");a.isUndefined(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][k])||
delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][k];h.data("no_value",0);var m={isInherited:!1},k=tdcCssEditor._getSettingsProperty(k,d,m);m.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),b.hide()):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),b.show());a.isUndefined(k)?(h.val(""),b.hide(),tdcCssEditor._updateData(h),tdcCssEditor._checkDefaultColor(h)):(h.val(""),h.attr("placeholder",k),e.attr("style","background-color: "+tdcCssEditor._getRgba(k)),
tdcCssEditor._updateData(h))},_inheritImage:function(b){var c=f(b.currentTarget);b=c.closest(".tdc-property-wrap");var h=b.find(".tdc-css-image-wrap"),e=b.find(".tdc-css-image-remove");b.find(".tdc-inherit-image").hide();e.addClass("tdc-hidden-button");h.data("image_link","");e=h.data("model_id");a.isUndefined(e)?tdcCssEditor.saveWidgetForm(c):(c=b.closest(".tdc-tab-content"),c=tdcCssEditor._generateCssAttValue(c),e=tdcIFrameData.getModel(e),tdcSidebarController.onUpdate(e,h.data("param_name"),"",
c));e={isInherited:!1};c=tdcCssEditor._getSettingsProperty("background-image",d,e);e.isInherited?(b.addClass(tdcCssEditor._INHERITED_CSS_CLASS),h.attr("style","background-image: url('"+c+"'")):h.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'")},_clearCssProperties:function(b){b=f(b.currentTarget);var c=b.data("model_id");tdConfirm.showModal("Clear CSS settings",tdcCssEditor,function(b,c){tdcCssEditor._currentCssSettings=d;if("undefined"===
typeof c)f(".tdc-responsiveness").replaceWith(tdcCssEditor._generateEditorResponsiveContent()),tdcCssEditor.doActionPanelRender(),tdcCssEditor.saveWidgetForm(f("."+b.get(0).className));else{var a=tdcIFrameData.getModel(c);tdcSidebarController.onUpdate(a,b.data("param_name"),"","");f(".tdc-responsiveness").replaceWith(tdcCssEditor._generateEditorResponsiveContent());tdcCssEditor.doActionPanelRender()}tb_remove()},[b,c],"Are you sure you want to clear all the CSS settings of the selected component?")},
_changeTextInput:function(b){var c=f(b.currentTarget),d=c.parent(),e=c;d.hasClass("tdc-box-margin")||d.hasClass("tdc-box-border")||d.hasClass("tdc-box-padding")||(e=c.closest(".tdc-property-wrap"));var d=c.val(),k=1;c.hasClass("tdc-css-opacity")&&(k=.01);var m=NaN;switch(b.type){case "keyup":switch(b.keyCode){case 38:f.isNumeric(d)&&(m=parseFloat(d)+k);break;case 40:f.isNumeric(d)&&(m=parseFloat(d)-k)}break;case "mousewheel":f.isNumeric(d)&&(m=0<b.originalEvent.deltaY?parseFloat(d)-k:parseFloat(d)+
k)}a.isNaN(m)||(1>k&&(m=m.toFixed(2)),c.val(m));tdcCssEditor._updateData(c);d=e.data("tdc-for");b={isInherited:!1};d=tdcCssEditor._getSettingsProperty(d,"",b);b.isInherited?(c.attr("placeholder",d),c.val(""),e.addClass(tdcCssEditor._INHERITED_CSS_CLASS)):e.removeClass(tdcCssEditor._INHERITED_CSS_CLASS)},_keydownTextInput:function(b){if(38===b.keyCode||40===b.keyCode)return!1},_focusTextInput:function(b){b=f(b.currentTarget);for(var c=b.closest(".tdc-property-wrap"),a=c[0].classList,d=0;d<a.length;d++)a[d].startsWith("tdc-el-")&&
c.removeClass(a[d]);c.addClass("tdc-el-"+b.data("tdc-for"))},_changeDropDown:function(b){b=f(b.currentTarget);var c=b.closest(".tdc-property-wrap"),d=c.find(".tdc-inherit-select");c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);tdcCssEditor._updateData(b);var e=c.data("tdc-for"),k={isInherited:!1};tdcCssEditor._getSettingsProperty(e,"",k);k.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),d.hide()):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),"all"===tdcCssEditor._currentViewportSettings.name?
d.hide():0===b[0].selectedIndex?a.isUndefined(tdcCssEditor._currentCssSettings.all)||a.isUndefined(tdcCssEditor._currentCssSettings.all[e])?d.hide():d.show():d.show())},doActionPanelRender:function(){tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css")},_bindEvents:function(){var b=f("body");b.on("keydown",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._changeTextInput);
b.on("focus",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._focusTextInput);b.on("change keyup",".tdc-tab-design .tdc-css-bg-color",tdcCssEditor._changeColor);b.on("change keyup",".tdc-tab-design .tdc-css-border-color",tdcCssEditor._changeColor);b.on("change",".tdc-tab-design .tdc-css-border-style",tdcCssEditor._changeDropDown);b.on("keydown",".tdc-tab-design input.tdc-css-border-radius",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-border-radius",
tdcCssEditor._changeTextInput);b.on("change",".tdc-tab-design .tdc-css-bg-style",tdcCssEditor._changeDropDown);b.on("change",".tdc-tab-design .tdc-css-bg-position",tdcCssEditor._changeDropDown);b.on("keydown",".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._changeTextInput);b.on("change keyup",".tdc-tab-design input.tdc-css-color-1-overlay",tdcCssEditor._changeColor);b.on("change keyup",".tdc-tab-design input.tdc-css-color-2-overlay",
tdcCssEditor._changeColor);b.on("mousedown",".tdc-tab-design .wp-picker-clear",tdcCssEditor._clearColorPicker);b.on("mousedown",".tdc-tab-design .wp-color-result",tdcCssEditor._showColorPicker);b.on("click",".tdc-tab-design .tdc-inherit-select",tdcCssEditor._inheritSelect);b.on("click",".tdc-tab-design .tdc-inherit-color",tdcCssEditor._inheritColor);b.on("click",".tdc-tab-design .tdc-css-image-wrap",tdcCssEditor.tdcCssImageWrapHandler);b.on("click",".tdc-tab-design .tdc-css-image-remove",tdcCssEditor.tdcCssImageRemoveHandler);
b.on("click",".tdc-tab-design .tdc-inherit-image",tdcCssEditor._inheritImage);b.on("click",".tdc-clear-css-properties",tdcCssEditor._clearCssProperties);b.on("click",".tdc-tab-design .tdc-responsive-buttons > div",function(b){var c,e=f(this);e.addClass("selected");e.siblings().removeClass("selected");var k="undefined"===typeof window.td_viewport_interval_list?tdcAdminIFrameUI._liveIframeWindowObject.td_viewport_interval_list:window.td_viewport_interval_list;b=tdcAdminIFrameUI.getLiveIframe();a.isUndefined(b)||
(c=b.contents().find(".tdc-element-selected").offset().top-b.contents().scrollTop());e.hasClass("tdc-responsive-all")?(tdcCssEditor._currentViewportSettings={name:"all",settings:d},a.isUndefined(b)||b.css("width","100%")):e.hasClass("tdc-responsive-tablet-landscape")?(tdcCssEditor._currentViewportSettings={name:"landscape",settings:{limitTop:k[2].limitBottom,limitBottom:parseInt(k[1].limitBottom)+1}},a.isUndefined(b)||b.css("width",tdcCssEditor._currentViewportSettings.settings.limitTop)):e.hasClass("tdc-responsive-tablet-portrait")?
(tdcCssEditor._currentViewportSettings={name:"portrait",settings:{limitTop:k[1].limitBottom,limitBottom:parseInt(k[0].limitBottom)+1}},a.isUndefined(b)||b.css("width",tdcCssEditor._currentViewportSettings.settings.limitTop)):e.hasClass("tdc-responsive-phone")&&(tdcCssEditor._currentViewportSettings={name:"phone",settings:{limitTop:k[0].limitBottom,limitBottom:d}},a.isUndefined(b)||b.css("width",tdcCssEditor._currentViewportSettings.settings.limitTop-300));f(".tdc-responsiveness").replaceWith(tdcCssEditor._generateEditorResponsiveContent());
tdcCssEditor.doActionPanelRender();a.isUndefined(b)||(e=b.contents().find(".tdc-element-selected"),e.length&&(e=e.offset().top,e=0<c?window.innerHeight>c?e-c:e-100:e-100,b.contents().scrollTop(e)))})},_updateData:function(b){var c=b.data("model_id"),a=b.data("param_name"),d=b.closest(".tdc-tab-content");"undefined"===typeof c?tdcCssEditor.saveWidgetForm(b):(b=tdcIFrameData.getModel(c),d=tdcCssEditor._generateCssAttValue(d),tdcSidebarController.onUpdate(b,a,"",d))},saveWidgetForm:function(b){var c=
b.closest("form");b=b.closest(".tdc-tab-content");if(c.length){var a=c.find('input[name="id_base"]').val(),d=c.find('input[name="widget-id"]').val().replace(a+"-",""),a="'widget-"+a+"["+d+"][tdc_css]'",d=c.find("input[name="+a+"]"),k=tdcCssEditor._generateCssAttValue(b);b.data("tdc_css",k);d.length?d.val(k):c.append('<input type="hidden" name='+a+' value="'+k+'">')}},addWidgetCssEditor:function(b,c){tdcCssEditor._mappedParameter=b;return tdcCssEditor._generateEditorContent(c)},addComposerCssEditor:function(b,
c){tdcCssEditor._mappedParameter=b;tdcCssEditor._model=c;var a=c.get("attrs")[b.param_name];return tdcCssEditor._generateEditorContent(a)},_CsWpColorPicker:function(b){var c=b.closest(".tdc-property-wrap");b.cs_wpColorPicker();c.find(".wp-color-result");c.hasClass(tdcCssEditor._INHERITED_CSS_CLASS)?(c=c.find(".wp-color-result"),""!==b.attr("placeholder")&&c.attr("style","background-color: "+tdcCssEditor._getRgba(b.attr("placeholder")))):("no_value"===b.val()&&b.val(""),tdcCssEditor._checkDefaultColor(b))},
_checkDefaultColor:function(b){var c=b.closest(".tdc-property-wrap").find(".wp-color-result");""===b.val()&&(b=b.data("default_value"),a.isUndefined(b)?c.attr("style",""):c.attr("style","background-color: "+tdcCssEditor._getRgba(b)))},_generateEditorContent:function(b){if(a.isEmpty(b))tdcCssEditor._currentCssSettings=d;else try{var c=JSON.parse(window.atob(b));tdcDebug.log(c);a.isObject(c)?tdcCssEditor._currentCssSettings=c:tdcCssEditor._currentCssSettings=d}catch(k){tdcCssEditor._currentCssSettings=
d,new tdcNotice.notice(k.message,!1,!1)}tdcSidebarPanel._hook.addAction("panel_rendered",function(){f(".tdc-css-image-wrap").each(function(b,c){var e=f(c),h=e.closest(".tdc-property-wrap"),k=h.find(".tdc-css-image-remove"),m=h.find(".tdc-inherit-image"),r={isInherited:!1},u=tdcCssEditor._getSettingsProperty("background-image",d,r);r.isInherited?h.addClass(tdcCssEditor._INHERITED_CSS_CLASS):h.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);a.isUndefined(u)?(k.addClass("tdc-hidden-button"),m.hide()):
("no_value"===u?k.addClass("tdc-hidden-button"):(k.removeClass("tdc-hidden-button"),e.attr("style",'background-image: url("'+u+'")')),"all"!==tdcCssEditor._currentViewportSettings.name&&m.show());e.data("image_link",u)});f(".tdc-inherit").each(function(b,c){var e=f(c),h=e.closest(".tdc-property-wrap");if("all"===tdcCssEditor._currentViewportSettings.name||h.hasClass(tdcCssEditor._INHERITED_CSS_CLASS))e.hide();else{var k=h.data("tdc-for"),h={isInherited:!1},k=tdcCssEditor._getSettingsProperty(k,d,
h);h.isInherited?e.hide():a.isUndefined(k)||e.show()}})});var h=c="",e="";b="";switch(tdcCssEditor._currentViewportSettings.name){case "all":c="selected";break;case "landscape":h="selected";break;case "portrait":e="selected";break;case "phone":b="selected"}c='<div class="tdc-responsive-buttons">'+('<div class="tdc-responsive-all '+c+'" title="Desktop viewport"><span class="tdc-all-icon"></span></div>')+('<div class="tdc-responsive-tablet-landscape '+h+'" title="Landscape viewport"><span class="tdc-tablet-landscape-icon"></span></div>')+
('<div class="tdc-responsive-tablet-portrait '+e+'" title="Portrait viewport"><span class="tdc-tablet-portrait-icon"></span></div>');c+='<div class="tdc-responsive-phone '+b+'" title="Phone viewport"><span class="tdc-phone-icon"></span></div>';c+="</div>";return c+=tdcCssEditor._generateEditorResponsiveContent()},_cleanCss:function(b,c){if("undefined"===typeof c)return d;if("no_value"===c)return c;if("background-image"===b){var h=/(url\s*\(\s*['"]?)(.*?)\s*(['"]?\s*\))/ig.exec(c);return a.isEmpty(h)?
"":h[2]}c=c.toLowerCase();c=c.replace(/!important|px/g,"");return c.trim()},_getDataNoValue:function(b){var c="";"no_value"===b&&(c=' data-no_value="1" ');return c},_generateEditorResponsiveContent:function(){function b(){return n={isInherited:!1}}function c(b){return"all"!==tdcCssEditor._currentViewportSettings.name?'placeholder="'+b+'"':""}function h(){return n.isInherited?" "+tdcCssEditor._INHERITED_CSS_CLASS:""}function e(c,d){var e=tdcCssEditor._getSettingsProperty(c,d,b()),g="-",f="";n.isInherited&&
(g=e,e="");a.isUndefined(m)||"margin-left"!==c&&"margin-right"!==c||(f=m.get("tag"),f="vc_column"===f||"vc_column_inner"===f?" "+tdcCssEditor._INACTIVE_CSS_CLASS:"");return'<input data-tdc-for="'+c+'" name="" type="text" value="'+e+'" class="tdc-css-box-input tdc-css-box-input-'+c+h()+f+'" title="Css '+c+'" placeholder="'+g+'" '+tdcSidebarPanel._getParamterDataAtts(k,m)+"/>"}tdcSidebarPanel._hook.removeAction("panel_css");var k=tdcCssEditor._mappedParameter,m=tdcCssEditor._model,n={isInherited:!1};
var g='<div class="tdc-responsiveness">'+('<div class="'+tdcSidebarPanel._getParameterClasses(k)+'">');g=g+'<div class="tdc-box-margin"><div class="tdc-margin-label">Margin</div>'+e("margin-top","");g+=e("margin-right","");g+=e("margin-bottom","");g+=e("margin-left","");g=g+'<div class="tdc-box-border"><div class="tdc-border-label">Border</div>'+e("border-top-width","");g+=e("border-right-width","");g+=e("border-bottom-width","");g+=e("border-left-width","");g=g+'<div class="tdc-box-padding"><div class="tdc-padding-label">Padding</div>'+
e("padding-top","");g+=e("padding-right","");g+=e("padding-bottom","");g+=e("padding-left","");g+="</div></div></div></div>";var l=tdcCssEditor._getSettingsProperty("border-style",d,b());g+='<div class="tdc-property-wrap tdc-border-style tdc-dropdown-big'+h()+'" data-tdc-for="border-style">';g=g+'<div class="tdc-property-title"><span title="Css border-style">Border style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+('<select class="tdc-css-border-style" '+
tdcSidebarPanel._getParamterDataAtts(k,m)+' name="">');g+=tdcCssEditor._generateDropdownOptions([{value:"solid",display:"Solid"},{value:"dotted",display:"Dotted"},{value:"dashed",display:"Dashed"},{value:"none",display:"None"},{value:"hidden",display:"Hidden"},{value:"double",display:"Double"},{value:"groove",display:"Groove"},{value:"ridge",display:"Ridge"},{value:"inset",display:"Inset"},{value:"outset",display:"Outset"},{value:"initial",display:"Initial"},{value:"inherit",display:"Inherit"}],l);
g+="</select></div></div>";var q=a.uniqueId(),l=tdcCssEditor._getSettingsProperty("border-color","",b()),r="";n.isInherited&&(r=l,l="");g+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-border-color'+h()+'" data-tdc-for="border-color">';g=g+'<div class="tdc-property-title"><span title="Css border-color">Border color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+('<input class="tdc-css-border-color" '+tdcSidebarPanel._getParamterDataAtts(k,
m)+tdcCssEditor._getDataNoValue(l)+' data-default_value="#888888" id="'+q+'" name="" type="text" '+c(r)+' value="'+l+'"/>');g+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(f("#"+q))});l=tdcCssEditor._getSettingsProperty("border-radius","",b());r="";n.isInherited&&(r=l,l="");g+='<div class="tdc-property-wrap tdc-border-radius tdc-textfield-small'+h()+'" data-tdc-for="border-radius">';g=g+'<div class="tdc-property-title"><span title="Css border-radius">Border radius</span></div><div class="tdc-property">'+
('<input class="tdc-css-border-radius" '+tdcSidebarPanel._getParamterDataAtts(k,m)+' name="" type="text" '+c(r)+' value="'+l+'"/>');g+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator "></div>';var u=a.uniqueId(),l=tdcCssEditor._getSettingsProperty("background-color","",b()),r="";n.isInherited&&(r=l,l="");g+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-bg-color'+h()+'" data-tdc-for="background-color">';
g=g+'<div class="tdc-property-title"><span title="Css background-color">Background color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+('<input class="tdc-css-bg-color" '+tdcSidebarPanel._getParamterDataAtts(k,m)+tdcCssEditor._getDataNoValue(l)+' id="'+u+'" name="" type="text" '+c(r)+' value="'+l+'"/>');g+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(f("#"+u))});tdcCssEditor._getSettingsProperty("background-image",
d,b());g+='<div class="tdc-property-wrap tdc-property-attach_image'+h()+'">';g=g+'<div class="tdc-property-title"><span title="Css background-image">Background image<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-image"></div></span></div><div class="tdc-property">'+('<div class="tdc-css-bg-image tdc-css-image-wrap " '+tdcSidebarPanel._getParamterDataAtts(k,m)+" style=\"background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png' )\"></div>");
g+='<a class="tdc-css-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';l=tdcCssEditor._getSettingsProperty("background-style",d,b());g+='<div class="tdc-property-wrap tdc-bg-style tdc-dropdown-big'+h()+'" data-tdc-for="background-style">';g=g+'<div class="tdc-property-title"><span title="Css background-size & background-repeat">Background style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+('<select class="tdc-css-bg-style" '+
tdcSidebarPanel._getParamterDataAtts(k,m)+' name="">');g+=tdcCssEditor._generateDropdownOptions([{value:"cover",display:"Cover"},{value:"contain",display:"Contain"},{value:"no-repeat",display:"No repeat"},{value:"repeat",display:"Repeat"}],l);g+="</select></div></div>";l=tdcCssEditor._getSettingsProperty("background-position",d,b());g+='<div class="tdc-property-wrap tdc-bg-position tdc-dropdown-big'+h()+'" data-tdc-for="background-position">';g=g+'<div class="tdc-property-title"><span title="Css background-position">Background position<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-bg-position" '+tdcSidebarPanel._getParamterDataAtts(k,m)+' name="">');g+=tdcCssEditor._generateDropdownOptions([{value:"center top",display:"Center Top"},{value:"center center",display:"Center Center"},{value:"center bottom",display:"Center Bottom"},{value:"left top",display:"Left Top"},{value:"left center",display:"Left Center"},{value:"left bottom",display:"Left Bottom"},{value:"right top",display:"Right Top"},{value:"right center",display:"Right Center"},{value:"right bottom",
display:"Right Bottom"}],l);g+="</select></div></div>";l=tdcCssEditor._getSettingsProperty("opacity","",b());r="";n.isInherited&&(r=l,l="");g+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+h()+'" data-tdc-for="opacity">';g=g+'<div class="tdc-property-title"><span title="Css background-image opacity">Background opacity</span></div><div class="tdc-property">'+('<input class="tdc-css-opacity" '+tdcSidebarPanel._getParamterDataAtts(k,m)+' name="" type="text" '+c(r)+' value="'+l+'"/>');
g+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div>';var v=a.uniqueId(),l=tdcCssEditor._getSettingsProperty("color-1-overlay","",b()),r="";n.isInherited&&(r=l,l="");g+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-1-overlay'+h()+'" data-tdc-for="color-1-overlay">';g=g+'<div class="tdc-property-title"><span title="Css gradient color From">Color 1 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+
('<input class="tdc-css-color-1-overlay" '+tdcSidebarPanel._getParamterDataAtts(k,m)+tdcCssEditor._getDataNoValue(l)+' id="'+v+'" name="" type="text" '+c(r)+' value="'+l+'"/>');g+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(f("#"+v))});var w=a.uniqueId(),l=tdcCssEditor._getSettingsProperty("color-2-overlay","",b()),r="";n.isInherited&&(r=l,l="");g+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-2-overlay'+h()+'" data-tdc-for="color-2-overlay">';
g=g+'<div class="tdc-property-title"><span  title="Css gradient color To">Color 2 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+('<input class="tdc-css-color-2-overlay" '+tdcSidebarPanel._getParamterDataAtts(k,m)+tdcCssEditor._getDataNoValue(l)+' id="'+w+'" name="" type="text" '+c(r)+' value="'+l+'"/>');g+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(f("#"+w))});
g=g+'<div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div>'+('<div class="tdc-clear-css-properties" '+tdcSidebarPanel._getParamterDataAtts(k,m)+' title="Clear all tab css settings">Clear CSS settings</div>');return g+"</div>"},_getAvailableViewportSetting:function(b,c,a){if("undefined"!==typeof tdcCssEditor._currentCssSettings){var d;switch(b){case "all":"undefined"!==typeof tdcCssEditor._currentCssSettings[b]&&(d="all");break;
case "landscape":case "portrait":case "phone":"undefined"!==typeof tdcCssEditor._currentCssSettings[b]?d=b:"undefined"!==typeof tdcCssEditor._currentCssSettings.all&&(d="all")}if("undefined"!==typeof d){if("undefined"!==typeof tdcCssEditor._currentCssSettings[d][c])return tdcCssEditor._currentViewportSettings.name!==d&&(a.isInherited=!0,tdcDebug.log(c)),tdcCssEditor._cleanCss(c,tdcCssEditor._currentCssSettings[d][c]);if("all"!==d)return tdcCssEditor._getAvailableViewportSetting("all",c,a)}}},_getSettingsProperty:function(b,
c,a){var d;"undefined"===typeof a&&(a={isInherited:!1});"undefined"!==typeof tdcCssEditor._currentCssSettings&&(d=tdcCssEditor._getAvailableViewportSetting(tdcCssEditor._currentViewportSettings.name,b,a));"undefined"===typeof d&&"undefined"!==typeof c&&(d=c);return d},_generateDropdownOptions:function(b,c,d){for(var e=[],h,f=!1,n=0,g=0;g<b.length;g++)a.isUndefined(d)||d!==b[g].value||(n=g),h="",a.isUndefined(c)||c!==b[g].value||(h='selected="selected"',f=!0),e.push("<option "+h+' value="'+b[g].value+
'">'+b[g].display+"</option>");f||(e[n]='<option selected="selected" value="'+b[n].value+'">'+b[n].display+"</option>");return e.join("")},_generateCssAttValue:function(b){var c={},d=b.find(".tdc-css-box-input-margin-top").val().trim(),e=b.find(".tdc-css-box-input-margin-right").val().trim(),f=b.find(".tdc-css-box-input-margin-bottom").val().trim(),m=b.find(".tdc-css-box-input-margin-left").val().trim(),n=b.find(".tdc-css-box-input-border-top-width").val().trim(),g=b.find(".tdc-css-box-input-border-right-width").val().trim(),
l=b.find(".tdc-css-box-input-border-bottom-width").val().trim(),q=b.find(".tdc-css-box-input-border-left-width").val().trim(),r=b.find(".tdc-css-box-input-padding-top").val().trim(),u=b.find(".tdc-css-box-input-padding-right").val().trim(),v=b.find(".tdc-css-box-input-padding-bottom").val().trim(),w=b.find(".tdc-css-box-input-padding-left").val().trim(),p=b.find(".tdc-css-border-radius").val().trim(),t=b.find(".tdc-css-opacity").val().trim();""!==d&&(c["margin-top"]=d);""!==e&&(c["margin-right"]=
e);""!==f&&(c["margin-bottom"]=f);""!==m&&(c["margin-left"]=m);""!==n&&(c["border-top-width"]=n);""!==g&&(c["border-right-width"]=g);""!==l&&(c["border-bottom-width"]=l);""!==q&&(c["border-left-width"]=q);""!==r&&(c["padding-top"]=r);""!==u&&(c["padding-right"]=u);""!==v&&(c["padding-bottom"]=v);""!==w&&(c["padding-left"]=w);d=b.find(".tdc-css-border-style");e=d.val().trim();""===e||d.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["border-style"]=e);d=b.find(".tdc-css-border-color");
e=d.val().trim();""!==e?c["border-color"]=e:(d=d.data("no_value"),a.isUndefined(d)||1!==d||(c["border-color"]="no_value"));""!==p&&(c["border-radius"]=p);p=b.find(".tdc-css-bg-color");d=p.val().trim();""!==d?c["background-color"]=d:(p=p.data("no_value"),a.isUndefined(p)||1!==p||(c["background-color"]="no_value"));p=b.find(".tdc-css-bg-image");p.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(p=p.data("image_link"),a.isUndefined(p)||("no_value"===p?c["background-image"]=
"no_value":""!==p&&(c["background-image"]='url("'+p+'")')));p=b.find(".tdc-css-bg-style");d=p.val().trim();""===d||p.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["background-style"]=d);p=b.find(".tdc-css-bg-position");d=p.val().trim();""===d||p.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["background-position"]=d);""!==t&&(c.opacity=t);t=b.find(".tdc-css-color-1-overlay");p=t.val().trim();""!==p?c["color-1-overlay"]=p:(t=t.data("no_value"),
a.isUndefined(t)||1!==t||(c["color-1-overlay"]="no_value"));b=b.find(".tdc-css-color-2-overlay");t=b.val().trim();""!==t?c["color-2-overlay"]=t:(b=b.data("no_value"),a.isUndefined(b)||1!==b||(c["color-2-overlay"]="no_value"));a.isUndefined(tdcCssEditor._currentCssSettings)&&(tdcCssEditor._currentCssSettings={});a.isUndefined(c["border-style"])||"solid"!==c["border-style"]||("all"===tdcCssEditor._currentViewportSettings.name||a.isUndefined(tdcCssEditor._currentCssSettings.all)||a.isUndefined(tdcCssEditor._currentCssSettings.all["border-style"]))&&
delete c["border-style"];a.isUndefined(c["background-style"])||"cover"!==c["background-style"]||("all"===tdcCssEditor._currentViewportSettings.name||a.isUndefined(tdcCssEditor._currentCssSettings.all)||a.isUndefined(tdcCssEditor._currentCssSettings.all["background-style"]))&&delete c["background-style"];a.isUndefined(c["background-position"])||"center top"!==c["background-position"]||("all"===tdcCssEditor._currentViewportSettings.name||a.isUndefined(tdcCssEditor._currentCssSettings.all)||a.isUndefined(tdcCssEditor._currentCssSettings.all["background-position"]))&&
delete c["background-position"];tdcDebug.log(c);a.isEmpty(c)?(delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name],delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+"_max_width"],delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+"_min_width"]):(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name]=c,a.isUndefined(tdcCssEditor._currentViewportSettings.settings)||(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+
"_max_width"]=tdcCssEditor._currentViewportSettings.settings.limitTop,tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+"_min_width"]=tdcCssEditor._currentViewportSettings.settings.limitBottom));tdcDebug.log(tdcCssEditor._currentCssSettings);tdcDebug.log("JSON.stringify");tdcDebug.log(JSON.stringify(tdcCssEditor._currentCssSettings));return a.isEmpty(tdcCssEditor._currentCssSettings)?"":window.btoa(JSON.stringify(tdcCssEditor._currentCssSettings))},_getRgba:function(b){return-1!==
b.indexOf("rgb")?b:(b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b))?"rgb("+parseInt(b[1],16)+", "+parseInt(b[2],16)+", "+parseInt(b[3],16)+")":""}}})(jQuery,_);var tdcSidebarPanel={};
(function(f){tdcSidebarPanel={_defaultGroupName:"General",_currentBoundModel:f,_hook:{_hooks:[],addAction:function(a,d){_.isUndefined(tdcSidebarPanel._hook._hooks[a])&&(tdcSidebarPanel._hook._hooks[a]=[]);tdcSidebarPanel._hook._hooks[a].push(d)},doAction:function(a,d){if(!_.isUndefined(tdcSidebarPanel._hook._hooks[a]))for(var b=0;b<tdcSidebarPanel._hook._hooks[a].length;b++)tdcSidebarPanel._hook._hooks[a][b](d)},removeAction:function(a){_.isUndefined(tdcSidebarPanel._hook._hooks[a])||delete tdcSidebarPanel._hook._hooks[a]}},
init:function(){var a=jQuery("body");a.on("change focus",".tdc-tab-no-design .tdc-property-dropdown:not(.tdc-row-col-dropdown):not(.tdc-innerRow-col-dropdown) select",function(a){if("focusin"===a.type||"focus"===a.type)this.oldValue=this.value;else{var b=jQuery(this);a=b.val();var c=tdcIFrameData.getModel(b.data("model_id")),b=b.data("param_name");tdcSidebarController.onUpdate(c,b,this.oldValue,a);this.oldValue=a;"block_template_id"===b&&setTimeout(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),
$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},!0)},500)}});a.on("keyup focus paste cut change",".tdc-tab-no-design .tdc-property-textfield input",function(a){var b=setTimeout(function(c){clearTimeout(b);if("focusin"===a.type)c.oldValue=c.value;else{var d=jQuery(c).val(),e=tdcIFrameData.getModel(jQuery(c).data("model_id"));"cut"===a.type&&(d="");tdcSidebarController.onUpdate(e,
jQuery(c).data("param_name"),c.oldValue,_.escape(d));c.oldValue=d}},100,this,a)});a.on("focus change",".tdc-tab-no-design .tdc-property-checkbox input",function(a){if("focusin"===a.type)this.oldValue=this.value;else{a=jQuery(this);var b=a.val();a.is(":checked")||(b="");var c=tdcIFrameData.getModel(a.data("model_id"));tdcSidebarController.onUpdate(c,a.data("param_name"),this.oldValue,b);this.oldValue=b}});a.on("click",".tdc-tab-no-design .tdc-image-wrap",tdcSidebarPanel.tdcImageWrapHandler);a.on("click",
".tdc-tab-no-design .tdc-image-remove",tdcSidebarPanel.tdcImageRemoveHandler);a.on("change keyup focus",".tdc-tab-no-design .tdc-property-colorpicker input",function(a){if("focusin"===a.type)this.oldValue=this.value;else{a=jQuery(this).val();var b=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(b,jQuery(this).data("param_name"),this.oldValue,a);this.oldValue=a}});a.on("change focus",".tdc-tab-no-design .tdc-row-col-dropdown select",function(a){if("focusin"===a.type||
"focus"===a.type)this.oldValue=this.value;else{a=jQuery(this).val();var b=tdcSidebar.getCurrentRow().data("model_id"),b=tdcIFrameData.getModel(b);"11"===this.oldValue&&("23_13"===a||"13_23"===a||"13_13_13"===a)||"23_13"===this.oldValue&&("11"===a||"13_23"===a||"13_13_13"===a)||"13_23"===this.oldValue&&("11"===a||"23_13"===a||"13_13_13"===a)||"13_13_13"===this.oldValue&&("11"===a||"23_13"===a||"13_23"===a)?(tdcIFrameData.changeRowModel(b,this.oldValue,a),b.getShortcodeRender(1,null,!0)):new tdcNotice.notice("Invalid row change detected: this.oldValue:"+
this.oldValue+" and curValue: "+a,!1,!0);this.oldValue=a}});a.on("change",".tdc-tab-no-design .tdc-row-col-dropdown input.tdc-property-input-radio",function(a){"undefined"!==typeof tdcSidebarPanel.timerChangingColumns&&clearTimeout(tdcSidebarPanel.timerChangingColumns);var b=jQuery(this);tdcSidebarPanel.timerChangingColumns=setTimeout(function(){var a=b.val(),d=tdcSidebar.getCurrentRow().data("model_id"),d=tdcIFrameData.getModel(d),e=d.get("childCollection");this.oldValue="11";_.isUndefined(e)||(e=
tdcIFrameData.getChildCollectionWidths(e),_.isUndefined(e)||(this.oldValue=e));"11"===this.oldValue&&("23_13"===a||"13_23"===a||"13_13_13"===a)||"23_13"===this.oldValue&&("11"===a||"13_23"===a||"13_13_13"===a)||"13_23"===this.oldValue&&("11"===a||"23_13"===a||"13_13_13"===a)||"13_13_13"===this.oldValue&&("11"===a||"23_13"===a||"13_23"===a)?(tdcIFrameData.changeRowModel(d,this.oldValue,a),d.getShortcodeRender(1,null,!0)):this.oldValue!==a&&new tdcNotice.notice("Invalid row change detected: this.oldValue:"+
this.oldValue+" and curValue: "+a,!1,!0);this.oldValue=a},300)});a.on("change",".tdc-tab-no-design .tdc-property-dropdown.tdc-add-class input.tdc-property-input-radio",function(a){if("focusin"===a.type||"focus"===a.type)this.oldValue=this.value;else{a=jQuery(this);var b=a.val(),c=tdcIFrameData.getModel(a.data("model_id"));console.log(a.data("model_id"));console.log(a.data("param_name"));tdcSidebarController.onUpdate(c,a.data("param_name"),this.oldValue,b);this.oldValue=b}});a.on("change focus",".tdc-tab-no-design .tdc-innerRow-col-dropdown select",
function(a){if("focusin"===a.type||"focus"===a.type)this.oldValue=this.value;else{a=jQuery(this).val();var b=tdcSidebar._$currentInnerRow.data("model_id"),b=tdcIFrameData.getModel(b);tdcIFrameData.changeInnerRowModel(b,this.oldValue,a);b.getShortcodeRender(tdcIFrameData.getColumnNumber(b),null,!0);this.oldValue=a}});a.on("change",".tdc-tab-no-design .tdc-innerRow-col-dropdown input.tdc-property-input-radio",function(a){"undefined"!==typeof tdcSidebarPanel.timerChangingInnerColumns&&clearTimeout(tdcSidebarPanel.timerChangingInnerColumns);
var b=jQuery(this);tdcSidebarPanel.timerChangingInnerColumns=setTimeout(function(){var a=b.val(),d=tdcSidebar._$currentInnerRow.data("model_id"),d=tdcIFrameData.getModel(d),e=d.get("childCollection");this.oldValue="11";_.isUndefined(e)||(e=tdcIFrameData.getChildCollectionWidths(e),_.isUndefined(e)||(this.oldValue=e));tdcIFrameData.changeInnerRowModel(d,this.oldValue,a);d.getShortcodeRender(tdcIFrameData.getColumnNumber(d),null,!0);this.oldValue=a},300)});a.on("change focus",".tdc-tab-no-design .tdc-widget-sidebar-dropdown select",
function(a){if("focusin"===a.type||"focus"===a.type)this.oldValue=this.value;else{a=jQuery(this).val();var b=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(b,jQuery(this).data("param_name"),this.oldValue,a);this.oldValue=a}});a.on("click",".tdc-tab-no-design .tdc-open-wpeditor",function(a){a.preventDefault();var b=jQuery(this);a=jQuery("#tdc-wpeditor");var c=a.children(".content"),d=b.data("mapped_parameter_name"),b=b.data("model_id"),e=tdcIFrameData.getModel(b).get("parentModel").get("attrs"),
f="tdc-three-column";if(_.has(e,"width"))switch(e.width){case "1/3":f="tdc-one-column";break;case "2/3":f="tdc-two-column"}c.addClass("tdc-dropped-wpeditor");c.html('<iframe id="tdc-iframe-wpeditor" class="'+f+'" src="'+window.tdcAdminSettings.pluginUrl+'/includes/wpeditor.php" scrolling="auto" style="width: 100%; height: 100%" data-model_id="'+b+'" data-mapped_parameter_name="'+d+'"></iframe>');a.show();tdcWindowFrame.setWindowFrame(a)});a.on("click","#tdc-wpeditor .tdc-iframe-close-button",function(a){a.preventDefault();
jQuery("#tdc-wpeditor").hide()});a.on("click",".tdc-sidebar-delete-row",tdcRowHandlerUI.deleteHandler);a.on("click",".tdc-sidebar-delete-inner-row",tdcInnerRowHandlerUI.deleteHandler);a.on("click",".tdc-sidebar-clone-row",tdcRowHandlerUI.cloneHandler);a.on("click",".tdc-sidebar-clone-inner-row",tdcInnerRowHandlerUI.cloneHandler)},tdcImageWrapHandler:function(a){var d=jQuery(a.currentTarget);d.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(d);
jQuery(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");window.send_to_editor=function(a){var b=jQuery("img",a).attr("src"),h="";"undefined"===typeof b?(b=jQuery(a).attr("src"),h=jQuery(a).attr("class")):h=jQuery("img",a).attr("class");jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),
beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_class:h,action:"tdc_ajax_get_image_id"}}).done(function(a,c,h){"success"===c&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(d.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button"),d.attr("style","background-image: url( '"+b+"') "),d.data("image_link",b),d.data("image_id",a.image_id),d.removeClass("tdc-no-image-selected"),window.send_to_editor=
window.original_send_to_editor,window.tb_remove(),c="",h=d.data("model_id"),h=tdcIFrameData.getModel(h),d.hasClass("tdc-no-image-selected")||(c=a.image_id.toString()),tdcSidebarController.onUpdate(h,d.data("param_name"),"",c)))}).fail(function(a,b,c){})};return!1},tdcImageRemoveHandler:function(a){var d=jQuery(a.currentTarget);a=d.closest(".tdc-property-wrap").find(".tdc-image-wrap");d.addClass("tdc-hidden-button");a.addClass("tdc-no-image-selected");jQuery.removeData(a,"image_link");a.attr("style",
"background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");d=a.data("model_id");d=tdcIFrameData.getModel(d);tdcSidebarController.onUpdate(d,a.data("param_name"),"","")},bindPanelToModel:function(a,d){if(_.isUndefined(tdcSidebarPanel._currentBoundModel)||tdcSidebarPanel._currentBoundModel.cid!==a.cid||!_.isUndefined(d)&&(_.isUndefined(d)||!0===d)){var b=window.tdcAdminSettings.mappedShortcodes[a.attributes.tag];tdcSidebarPanel._deletePanel();jQuery(".tdc-empty-sidebar").hide();
tdcSidebarPanel._currentBoundModel=a;for(var c=[],h=0;h<b.params.length;h++){var e=tdcSidebarPanel._defaultGroupName;_.isEmpty(b.params[h].group)||(e=b.params[h].group);c.push(e)}var c=_.uniq(c),f=e="",m=tdcSidebar.getCurrentTabId(),n,g,e=e+'<div class="tdc-tabs">';var l=g=n="";for(h=0;h<c.length;h++){f=tdcSidebarPanel._fixGroupName(c[h]);var q=tdcUtil.makeSafeForCSS(f);0===h?(n='<a href="#" data-tab-id="td-tab-'+q+'" class="tdc-tab-active" title="'+f+' settings">'+f+"</a>",g='<a href="#" data-tab-id="td-tab-'+
q+'" title="'+f+' settings">'+f+"</a>"):_.isUndefined(m)||m!=="td-tab-"+q?l+='<a href="#" data-tab-id="td-tab-'+q+'" title="'+f+' settings">'+f+"</a>":(n=g,l+='<a href="#" data-tab-id="td-tab-'+q+'" class="tdc-tab-active" title="'+f+' settings">'+f+"</a>")}e=e+(n+l)+'</div><div class="tdc-tab-content-wrap">';l=g=n="";for(h=0;h<c.length;h++)f=tdcSidebarPanel._fixGroupName(c[h]),q=tdcUtil.makeSafeForCSS(f),f="tdc-tab-no-design","css"===q&&(f="tdc-tab-design"),0===h?(n='<div class="tdc-tab-content tdc-tab-content-visible '+
f+'" id="td-tab-'+q+'">',g='<div class="tdc-tab-content '+f+'" id="td-tab-'+q+'">'):_.isUndefined(m)||m!=="td-tab-"+q?l+='<div class="tdc-tab-content '+f+'" id="td-tab-'+q+'">':(n=g,l+='<div class="tdc-tab-content tdc-tab-content-visible '+f+'" id="td-tab-'+q+'">'),l+=tdcSidebarPanel._bindGroupAndGetHtml(c[h],b,a),q=' data-model_id="'+a.cid+'" ',"vc_row"===a.attributes.tag?(l+='<div class="tdc-sidebar-row-buttons">',l+='<div class="tdc-sidebar-button tdc-sidebar-delete-row" '+q+' title="Delete the current selected Row">Delete Row</div>',
l+='<div class="tdc-sidebar-button tdc-sidebar-clone-row" '+q+' title="Make a copy of the current selected Row. The copy will appear below the current Row">Clone Row</div>',l+="</div>"):"vc_row_inner"===a.attributes.tag&&(l+='<div class="tdc-sidebar-row-buttons">',l+='<div class="tdc-sidebar-button tdc-sidebar-delete-inner-row" '+q+' title="Delete the current selected Inner Row">Delete Inner Row</div>',l+='<div class="tdc-sidebar-button tdc-sidebar-clone-inner-row" '+q+' title="Make a copy of the current selected Inner Row. The copy will appear below the current Inner Row">Clone Inner Row</div>',
l+="</div>"),l+="</div>";e=e+(n+l)+"</div>";jQuery(".tdc-inspector .tdc-tabs-wrapper").html(e);jQuery(".tdc-inspector-wrap").addClass("tdc-inspector-active");jQuery(".tdc-breadcrumbs").show();tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css");(function(){if("vc_row"===a.get("tag")){var b=jQuery("body .tdc-row-col-dropdown select"),c=jQuery("body .tdc-row-stretch-dropdown select"),d=a.get("childCollection");if(!_.isUndefined(d)){d=tdcIFrameData.getChildCollectionWidths(d);
_.isUndefined(d)&&(d="11");b.length?b.val(d):(b=jQuery("body .tdc-row-col-dropdown input[value='"+d+"']"),b.length&&b.attr("checked","checked"));var b=a.get("attrs");if(_.has(b,"full_width"))var e=b.full_width;_.isUndefined(e)&&(e="");c.val(e)}}})();(function(){if("vc_row_inner"===a.get("tag")){var b=jQuery("body .tdc-innerRow-col-dropdown select"),c=a.get("childCollection");if(!_.isUndefined(c)){c=tdcIFrameData.getChildCollectionWidths(c);_.isUndefined(c)&&(c="11");var d=a.get("parentModel").get("attrs"),
e="";_.has(d,"width")&&(e=d.width.replace("/",""));if(b.length)switch(b.val(c),e){case "":case "11":b.find("option[value=12_12]").hide();b.find("option[value=23_13]").show();b.find("option[value=13_23]").show();b.find("option[value=13_13_13]").show();break;case "13":b.find("option[value=12_12]").hide();b.find("option[value=23_13]").hide();b.find("option[value=13_23]").hide();b.find("option[value=13_13_13]").hide();break;case "23":b.find("option[value=12_12]").show(),b.find("option[value=23_13]").hide(),
b.find("option[value=13_23]").hide(),b.find("option[value=13_13_13]").hide()}else if(b=jQuery('body .tdc-innerRow-col-dropdown input[value="'+c+'"]'),b.length)switch(b.attr("checked","checked"),b.next("label").show(),e){case "":case "11":b.parent().find("input[value=12_12] + label").hide();b.parent().find("input[value=23_13] + label").show();b.parent().find("input[value=13_23] + label").show();b.parent().find("input[value=13_13_13] + label").show();break;case "13":b.parent().find("input[value=12_12] + label").hide();
b.parent().find("input[value=23_13] + label").hide();b.parent().find("input[value=13_23] + label").hide();b.parent().find("input[value=13_13_13] + label").hide();break;case "23":b.parent().find("input[value=12_12] + label").show(),b.parent().find("input[value=23_13] + label").hide(),b.parent().find("input[value=13_23] + label").hide(),b.parent().find("input[value=13_13_13] + label").hide()}}}})()}},_bindGroupAndGetHtml:function(a,d,b){var c="",f=window.tdcAdminSettings.mappedBlockTemplates,e=b.get("attrs");
if(_.has(e,"block_template_id")&&!_.isEmpty(e.block_template_id)){for(var e=e.block_template_id,k,m,n,g=0;g<d.params.length;g++)"custom_title"===d.params[g].param_name?k=g:"custom_url"===d.params[g].param_name?m=g:"block_template_id"===d.params[g].param_name&&(n=g);_.isUndefined(k)||(a===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[k].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[k],b)):d.params[k].group===a&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[k],b)));_.isUndefined(m)||
(a===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[m].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[m],b)):d.params[m].group===a&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[m],b)));_.isUndefined(n)||(a===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[n].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[n],b)):d.params[n].group===a&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[n],b)));for(g=0;g<f[e].params.length;g++)a===tdcSidebarPanel._defaultGroupName?
_.isEmpty(f[e].params[g].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(f[e].params[g],b)):f[e].params[g].group===a&&(c+=tdcSidebarPanel._bindParamAndGetHtml(f[e].params[g],b));for(g=0;g<d.params.length;g++)_.isEmpty(d.params[g].td_type)&&"custom_title"!==d.params[g].param_name&&"custom_url"!==d.params[g].param_name&&"block_template_id"!==d.params[g].param_name&&(a===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[g].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[g],b)):d.params[g].group===
a&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[g],b)))}else for(g=0;g<d.params.length;g++)a===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[g].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[g],b)):d.params[g].group===a&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[g],b));return c},_bindParamAndGetHtml:function(a,d){switch(a.type){case "colorpicker":return tdcSidebarPanel.addColorpicker(a,d);case "dropdown":return tdcSidebarPanel.addDropDown(a,d);case "checkbox":return tdcSidebarPanel.addCheckBox(a,
d);case "attach_image":return tdcSidebarPanel.addUploadImage(a,d);case "textfield":return tdcSidebarPanel.addTextField(a,d);case "textarea_html":return tdcSidebarPanel.addTextAreaHtml(a,d);case "textarea_raw_html":return tdcSidebarPanel.addTextAreaRawHtml(a,d);case "css_editor":return"";case "tdc_css_editor":return tdcCssEditor.init(),tdcCssEditor.addComposerCssEditor(a,d);case "horizontal_separator":return tdcSidebarPanel.addSeparatorHorizontal(a,d);default:return a.param_name+" - "+a.type+"<br>"}},
_deletePanel:function(){tdcDebug.log("clear _deletePanel ");tdcSidebarPanel._hook._hooks=[];tdcSidebarPanel._currentBoundModel=f;jQuery(".tdc-breadcrumbs").hide();jQuery(".tdc-inspector .tdc-current-element-head").empty();jQuery(".tdc-inspector .tdc-tabs-wrapper").empty();jQuery(".tdc-inspector-wrap").removeClass("tdc-inspector-active");jQuery(".tdc-empty-sidebar").show();tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible");tdcSidebar.$_currentElementHead.removeClass("tdc-current-element-siblings-button-on");
tdcSidebar.hideWpeditor()},_getParameterClasses:function(a){var d="tdc-property-wrap tdc-property-"+a.type;d+=" tdc-property-"+a.param_name;_.isUndefined(a["class"])||(d+=" "+a["class"]);return d},_getParameterCurrentValue:function(a,d){return _.isEmpty(d.get("attrs")[a.param_name])?"dropdown"===a.type||_.isEmpty(a.value)?"":a.value:d.get("attrs")[a.param_name]},_getParameterDomName:function(a){return"tdc-param-"+a.param_name},_getParamterDataAtts:function(a,d){var b="";if("undefined"===typeof d)return b;
b+=' data-model_id="'+d.cid+'"';"undefined"!==typeof a&&(b+=' data-param_name="'+a.param_name+'"');return b},_fixGroupName:function(a){switch(a){case "Design options":return"Css";case "Pagination":return"Extra";case "Ajax filter":return"Ajax"}return a},clearPanel:function(){tdcSidebarPanel._deletePanel()},addColorpicker:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');var c="",f=_.uniqueId(),c=c+('<div class="'+tdcSidebarPanel._getParameterClasses(a)+
'">'),c=c+('<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>"),c=c+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(a,d)+' id="'+f+'" name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="text" value="'+tdcSidebarPanel._getParameterCurrentValue(a,d)+'"/>'),c=c+"</div></div>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery("#"+f).cs_wpColorPicker()});return c},addDropDown:function(a,d){var b=!0;_.has(a,"tdc_dropdown_images")&&""!==
a.tdc_dropdown_images&&(b=!1);for(var c="",f="",e=Object.keys(a.value),k=0;k<e.length;k++){var m=String(a.value[e[k]]),n=String(tdcSidebarPanel._getParameterCurrentValue(a,d)),g="";if(b)n===m&&(g=' selected="selected" '),f+="<option "+g+' value="'+m+'">'+e[k]+"</option>";else{0==k&&""===n&&(n=m);n===m&&(g=" checked ");var n=_.uniqueId(),l=m;if("vc_row"===d.attributes.tag||"vc_row_inner"===d.attributes.tag)l="col_"+l;f+='<input class="tdc-property-input-radio" type="radio" '+tdcSidebarPanel._getParamterDataAtts(a,
d)+' id="'+n+'" name="'+tdcSidebarPanel._getParameterDomName(a)+'" '+g+' value="'+m+'">';f+='<label class="tdc-property-input-radio-label" for="'+n+'" title="'+e[k]+'"><div class="'+l+'"></div></label>'}}e="";_.has(a,"description")&&""!==a.description&&(e=' title="'+a.description+'" ');c+='<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">';c+='<div class="tdc-property-title"><span'+e+">"+a.heading+"</span></div>";c+='<div class="tdc-property">';b?(c+="<select "+tdcSidebarPanel._getParamterDataAtts(a,
d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'">',c=c+f+"</select>"):c+=f;return c+"</div></div>"},addCheckBox:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');var c="";""!==tdcSidebarPanel._getParameterCurrentValue(a,d)&&(c=" checked ");var f=""+('<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">');f+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";f=f+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(a,
d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="checkbox" value="yes" '+c+"/>");return f+"</div></div>"},addUploadImage:function(a,d){var b="";_.has(a,"description")&&""!==a.description&&(b=' title="'+a.description+'" ');var c=""+('<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">');c+='<div class="tdc-property-title"><span'+b+">"+a.heading+"</span></div>";c=c+'<div class="tdc-property">'+('<div class="tdc-image-wrap tdc-no-image-selected" '+tdcSidebarPanel._getParamterDataAtts(a,
d)+" style=\"background-image: url('"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png')\">");c+='</div><a class="tdc-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-image-wrap").each(function(b,c){var e=jQuery(c);if(!e.parent().parent(".tdc-bg-upload").length&&a.param_name===e.data("param_name")){var f=tdcSidebarPanel._getParameterCurrentValue(a,d);""!==f&&jQuery.ajax({timeout:1E4,type:"POST",
url:tdcUtil.getRestEndPoint("td-composer/get_image_url","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_id:f,action:"tdc_ajax_get_image_url"}}).done(function(a,b,c){"success"===b&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(e.attr("style","background-image: url('"+a.image_url+"')").removeClass("tdc-no-image-selected"),e.data("image_link",a.image_url),e.data("image_id",
f),e.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button")))}).fail(function(a,b,c){})}})});return c},addTextArea:function(){},addTextField:function(a,d){var b="",c="";if(_.has(a,"description")&&""!==a.description){var f=jQuery("<div>"+a.description+"</div>");a.description===f.text()?b=' title="'+a.description+'" ':c='<div class="tdc-description">'+a.description+"</div>"}f=""+('<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">');f+='<div class="tdc-property-title"><span'+
b+">"+a.heading+"</span></div>";f=f+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(a,d)+' name="'+tdcSidebarPanel._getParameterDomName(a)+'" type="text" value="'+tdcSidebarPanel._getParameterCurrentValue(a,d)+'"/>');return f=f+c+"</div></div>"},addTextAreaHtml:function(a,d){_.has(a,"description");var b='<a href="#" class="tdc-open-wpeditor" data-model_id="'+d.cid+'" data-mapped_parameter_name="'+a.param_name+'">Edit Content</a>';tdcSidebarPanel._hook.addAction("panel_rendered",
function(){});return b},addTextAreaRawHtml:function(a,d){var b=_.uniqueId("tdc_textarea_"),c="";_.has(a,"description")&&""!==a.description&&(c=' title="'+a.description+'" ');var f=""+('<div class="'+tdcSidebarPanel._getParameterClasses(a)+'">');f+='<div class="tdc-property-title"><span'+c+">"+a.heading+"</span></div>";f=f+'<div class="tdc-property">'+('<textarea id="'+b+'" class="tdc-textarea" '+tdcSidebarPanel._getParamterDataAtts(a,d)+">"+tdcSidebarPanel._getParameterCurrentValue(a,d)+"</textarea>");
f+="</div></div>";jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/decode_html_content","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{post_id:window.tdcPostSettings.postId,action:"tdc_ajax_decode_html_content",content:tdcSidebarPanel._getParameterCurrentValue(a,d)}}).done(function(a,c,d){"success"===c&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,
!0,!1):jQuery("#"+b).html(a.parsed_content).show())}).fail(function(a,b,c){});jQuery("body").on("keyup","#"+b,function(a){a=jQuery(a.target);var b=tdcIFrameData.getModel(a.data("model_id")),c=window.btoa(encodeURIComponent(a.val()));tdcSidebarController.onUpdate(b,a.data("param_name"),c,c)});return f},addSeparatorHorizontal:function(a,d){return""+('<div class="tdc-sidebar-horizontal-separator '+tdcSidebarPanel._getParameterClasses(a)+'"></div>')}}})();var tdcUtil={};
(function(){tdcUtil={getRestEndPoint:function(f,a){return _.isEmpty(window.tdcAdminSettings.permalinkStructure)?window.tdcAdminSettings.wpRestUrl+f+"&"+a:window.tdcAdminSettings.wpRestUrl+f+"?"+a},makeSafeForCSS:function(f){return f.replace(/[^a-z0-9]/g,function(a){var d=a.charCodeAt(0);return 32===d?"-":65<=d&&90>=d?a.toLowerCase():"__"+("000"+d.toString(16)).slice(-4)})}}})();var tdcJobManager={};
(function(){tdcJobManager={_sentJobs:{},totalJobsCount:0,job:function(){this.shortcode="";this.columns=0;this.error_callback=this.success_callback=this.blockUid=""},jobRequest:function(f){this.shortcode=f.shortcode;this.columns=f.columns;this.jobId=tdcJobManager._generateJobId();this.postId=window.tdcPostSettings.postId;this.replyHtml=""},addJob:function(f){tdcMain.setContentModified();tdcDebug.group("%c tdcJobManager.addJob","background-color:#2489c2; color:white");var a=new tdcJobManager.jobRequest(f);
jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/do_job","tmp_jobId="+a.jobId+"&tmp_blockUid="+a.blockUid+"&uuid="+tdcJobManager._getUniqueID()+"&post_id="+window.tdcPostSettings.postId),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},cache:!1,data:a,dataType:"json",statusCode:{404:function(){console.log("tdcJobManager.addJob - ERROR: 404 not found")},500:function(){console.log("tdcJobManager.addJob - ERROR: 500 server error")}},
success:function(d,b,c){null===d?f.error(a,"tdcJobManager.addJob - ERROR: Empty response received from server"):(!0===tdcJobManager._isJobCallbackReplyValid(f.blockUid,d.jobId)?f.success_callback(d):tdcDebug.log("tdcJobManager.addJob - dropped job :) (probably it's older than the last timestamp)"),tdcDebug.groupEnd())},error:function(d,b,c){f.error_callback(a,"tdcJobManager.addJob - Error callback - textStatus: "+b+" errorThrown: "+c);tdcDebug.groupEnd()}})},_isJobCallbackReplyValid:function(f,a){return"undefined"===
typeof tdcJobManager._sentJobs[f]||parseInt(tdcJobManager._sentJobs[f])<parseInt(a)?(tdcJobManager._sentJobs[f]=a,!0):!1},_generateJobId:function(){var f=tdcJobManager.totalJobsCount;tdcJobManager.totalJobsCount++;return f},_getUniqueID:function(){function f(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return f()+f()+"-"+f()+"-"+f()+"-"+f()+"-"+f()+f()+f()}}})();
